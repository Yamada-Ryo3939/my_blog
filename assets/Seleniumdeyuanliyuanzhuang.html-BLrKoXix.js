import{_ as t,c as l,b as p,a as e,d as s,e as i,r,o}from"./app-BCBObj6C.js";const d={},c={href:"https://googlechromelabs.github.io/chrome-for-testing/known-good-versions-with-downloads.json",target:"_blank",rel:"noopener noreferrer"},u={href:"https://cdn.npmmirror.com/binaries/chrome-for-testing",target:"_blank",rel:"noopener noreferrer"},m={href:"https://registry.npmmirror.com/binary.html?path=chrome-for-testing/",target:"_blank",rel:"noopener noreferrer"};function h(g,n){const a=r("ExternalLinkIcon");return o(),l("div",null,[n[8]||(n[8]=p(`<p>selenium是目前主流的<strong>Web浏览器 自动化方案</strong>。</p><p>通过它我们可以写出自动化程序，像人一样在浏览器里操作web界面，比如点击界面按钮，在文本框中输入文字等操作。</p><p>而且也可以从web界面获取信息。比如火车、汽车票务信息，招聘网站职位信息等，然后用程序进行分析处理。</p><h2 id="原理" tabindex="-1"><a class="header-anchor" href="#原理"><span>原理</span></a></h2><p>Selenium的自动化原理是这样的：</p><p>自动化程序（包含Selenium客户端库）←→浏览器驱动←→浏览器</p><p>也就是说我们写的自动化程序需要使用<strong>客户端库</strong>。</p><h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h2><p>Selenium环境的安装主要是安装三样东西：<strong>客户端库</strong>，<strong>浏览器驱动</strong>和<strong>浏览器</strong>，浏览器咱都有，不然咱也看不到这篇博客了（笑）。这里只讲客户端库和浏览器驱动的安装~</p><h3 id="客户端库" tabindex="-1"><a class="header-anchor" href="#客户端库"><span>客户端库</span></a></h3><p>不同的编程语言选择不同的Selenium客户端库，这里选择使用Python，用pip命令即可。打开命令行程序运行如下命令</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">pip <span class="token function">install</span> selenium</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><span style="color:gray;"><em>mac系统需要使用pip3，本人使用windows系统所以只演示windows指令了</em></span></p><p>如果安装比较慢可以尝试使用国内的清华大学镜像源</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">pip <span class="token function">install</span> selenium <span class="token parameter variable">-i</span> https://pypi.tuna.tsinghua.edu.cn/simple</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="浏览器驱动" tabindex="-1"><a class="header-anchor" href="#浏览器驱动"><span>浏览器驱动</span></a></h3><p>不同的浏览器需要选择不同的浏览器驱动，即使是同一种浏览器，自动化时使用的浏览器驱动程序也要<strong>版本匹配</strong>。</p><p><span style="color:gray;"><em>tips:如果使用的是微软的浏览器，比如系统自带的edge浏览器的话就不需要手动安装了，因为内部是自带的</em></span></p><p>以前使用selenium自动化浏览器驱动都需要自行下载，商业浏览器比如Chrome、Edge、Firefox、Safari都会自动更新版本，但是下载的浏览器驱动却不会自动更新，这就会导致selenium自动化会出现<strong>浏览器驱动和浏览器版本不匹配的问题</strong>。</p><p>为了解决这个问题，现在新版的Python Selenium客户端库内置了一个<strong>Selenium manager</strong>工具，运行程序时它会为我们自动下载浏览器和浏览器驱动。</p><p>所以现在最简单的方法就是让Selenium manager自动帮你下载安装浏览器驱动。</p><h4 id="edge驱动自动安装" tabindex="-1"><a class="header-anchor" href="#edge驱动自动安装"><span>Edge驱动自动安装</span></a></h4><p>Windows上，Edge浏览器缺省就会有，所以Windows上基于Edge浏览器的自动化代码最简单。</p><p>下面的代码可以自动化的打开Edge浏览器，并自动化打开你指定的网站，可以先了解一下：</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver</span>
<span class="line"></span>
<span class="line">wd <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Edge<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#指定打开Edge浏览器，并自动下载驱动</span></span>
<span class="line"></span>
<span class="line">wd<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&#39;https://yamada-ryo3939.github.io/my_blog/&#39;</span><span class="token punctuation">)</span> <span class="token comment">#跳转到网页，这里拿我自己的博客举例子</span></span>
<span class="line"></span>
<span class="line"><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">&#39;按回车退出&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>第3行代码里的Edge指定了要自动化的是Edge浏览器，同理它也可以被替换成Chrome等浏览器，然后Selenium Manager就会自动检查系统是否安装了对应浏览器，没有就下载安装；再检查是否安装该浏览器<strong>对应版本</strong>的驱动，没有就自动下载安装。</p><p>Selenium Manager下载的驱动在本机的路径通常是：</p><div class="language-powershell line-numbers-mode" data-highlighter="prismjs" data-ext="powershell" data-title="powershell"><pre><code><span class="line"><span class="token comment"># Windows</span></span>
<span class="line">cd C:\\Users\\用户名\\<span class="token punctuation">.</span>cache\\selenium\\msedgedriver\\win64\\版本号\\msedgedriver<span class="token punctuation">.</span>exe</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>实际生产中只需要会一种浏览器自动化就ok了，如果上面的这种安装方式符合你的自动化需求，安装这一节后面的其他内容可以跳过去不用看，节省时间。</p><h4 id="chrome驱动自动安装" tabindex="-1"><a class="header-anchor" href="#chrome驱动自动安装"><span>Chrome驱动自动安装</span></a></h4><p>如果想用Chrome浏览器实现自动化，可以去官网（或者电脑自带的应用市场）下载Chrome浏览器。</p><p>然后就可以运行之前的代码了（稍稍修改一下变成打开Chorme浏览器）：</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver</span>
<span class="line"></span>
<span class="line">wd <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#指定打开浏览器，并自动下载驱动</span></span>
<span class="line"></span>
<span class="line">wd<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&#39;https://yamada-ryo3939.github.io/my_blog/&#39;</span><span class="token punctuation">)</span> <span class="token comment">#跳转到网页，这里拿我自己的博客举例子</span></span>
<span class="line"></span>
<span class="line"><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">&#39;按回车退出&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意！海外用户这样就万事大吉了，和Edge浏览器一样方便，但是<strong>国内用户</strong>麻烦很多。</p>`,34)),e("p",null,[n[1]||(n[1]=s("Selenium Manager对Chrome浏览器驱动，会去网址",-1)),e("a",c,[n[0]||(n[0]=s("https://googlechromelabs.github.io/chrome-for-testing/known-good-versions-with-downloads.json",-1)),i(a)]),n[2]||(n[2]=s("查询各版本驱动下载网址，这个网址在国内不同网络环境有的能访问有的不能（能挂梯子的当我没说），我们可以通过设置环境变量SE_DRIVER_MIRROR_URL的值，指定驱动源的URL。",-1))]),e("p",null,[n[4]||(n[4]=s("比如，可以设置为阿里的源",-1)),e("a",u,[n[3]||(n[3]=s("https://cdn.npmmirror.com/binaries/chrome-for-testing",-1)),i(a)])]),n[9]||(n[9]=p(`<p>Windows系统命令行窗口可以使用如下命令</p><div class="language-powershell line-numbers-mode" data-highlighter="prismjs" data-ext="powershell" data-title="powershell"><pre><code><span class="line"><span class="token function">set</span> SE DRIVER MIRROR URL=https:<span class="token operator">/</span><span class="token operator">/</span>cdn<span class="token punctuation">.</span>npmmirror<span class="token punctuation">.</span>com/binaries/chrome-<span class="token keyword">for</span><span class="token operator">-</span>testing</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这样设置之后Selenium就会根据镜像网址查看从哪里下载Chrome浏览器驱动了。</p><p><strong>但是！仍然可能会存在问题：</strong></p><p>打开这个文件可以发现里面的下载地址都是&lt;storage.googleapis.com&gt;这个海外镜像的域名，而不是本站下载网址；这些镜像文件只是单纯的同步文件，至于里面包含的URL不会替换成相应的本站的地址。</p><p>这个问题在实战运行时概率会出现问题，如果没问题就不用管了，如果有问题的话可以看看接下来介绍的手动下载浏览器驱动的方法。</p><h4 id="chrome驱动手动下载" tabindex="-1"><a class="header-anchor" href="#chrome驱动手动下载"><span>Chrome驱动手动下载</span></a></h4><p>如果Selenium Manager不能自动安装下载Chrome浏览器驱动，可以手动下载。</p>`,8)),e("p",null,[n[6]||(n[6]=s("安装好Chrome浏览器之后点击<",-1)),e("a",m,[n[5]||(n[5]=s("CNPM Binaries Mirror",-1)),i(a)]),n[7]||(n[7]=s(">，查看一下自己的Chrome浏览器版本，选择当前版本相对应的版本的驱动。",-1))]),n[10]||(n[10]=p(`<p><span style="color:gray;"><em>tips:浏览器和驱动的大版本号一定要匹配，小版本号尽量详尽即可，站内可能找不到版本号完全一样的驱动</em></span></p><p>下载后可以把 chromedriver.exe 放到环境变量<code>PATH</code>指定的其中一个目录里面，代码无需做任何修改。因为Selenium会 优先在环境变量 <code>PATH</code>的那些路径里面 找浏览器驱动。</p><p>如果不想放在环境变量<code>PATH</code>中，就需要在代码里指定浏览器驱动路径：</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token comment"># 在代码前加上，指定驱动路径</span></span>
<span class="line"><span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>chrome<span class="token punctuation">.</span>service <span class="token keyword">import</span> Service</span>
<span class="line">wd <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span>service<span class="token operator">=</span>Service<span class="token punctuation">(</span><span class="token string">r&quot;d:\\tools\\chromedriver.exe&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>手动下载的弊端就是每当浏览器版本更新之后都需要再重新这样配置一次，非常麻烦，所以能自动更新就是自动更新，非常推荐大家用Edge浏览器。</p>`,5))])}const b=t(d,[["render",h]]),k=JSON.parse('{"path":"/blogs/Selenium/Seleniumdeyuanliyuanzhuang.html","title":"Part 1.Selenium的原理与安装","lang":"en-US","frontmatter":{"title":"Part 1.Selenium的原理与安装","date":"2025/9/21","tags":["Selenium自动化"],"categories":["技术学习"]},"headers":[{"level":2,"title":"原理","slug":"原理","link":"#原理","children":[]},{"level":2,"title":"安装","slug":"安装","link":"#安装","children":[{"level":3,"title":"客户端库","slug":"客户端库","link":"#客户端库","children":[]},{"level":3,"title":"浏览器驱动","slug":"浏览器驱动","link":"#浏览器驱动","children":[]}]}],"git":{"createdTime":null,"updatedTime":null,"contributors":[]},"filePathRelative":"blogs/Selenium/Selenium的原理与安装.md"}');export{b as comp,k as data};
